<%- include('../../../templates/CVO-Head-Location.ejs') -%>
<script>
document.getElementById("registration_list").className="active";
document.getElementById("transaction_list").className="active";
</script>


<section >



                       <div class="row clearfix">
                       <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                           <div class="card">
                               <div class="header col-sm-12">

                                <div class="col-sm-4" align="center">
                                       <img src="/PetOwners<%= currentPetOwner.str_PetOwnerPicturePath %>"  style="border:4px;border-style:solid;border-color:#2196f3" id="blah" src="#" alt="your image" width="200" height="200" />
                                </div>
                                <div class="col-sm-8">
                                    <h1><%= currentPetOwner.str_PetOwnerLastName+", "+currentPetOwner.str_PetOwnerFirstName+" "+currentPetOwner.str_PetOwnerMiddleName %><p class="material-icons" style="cursor:hand;" data-toggle="tooltip" data-placement="top" title="ID: #<%= currentPetOwner.int_PetOwnerId %>" >&nbsp;&#9432;</p></h1>
                                    <h2><%= currentPetOwner.str_CompleteAddress %>(<%= currentPetOwner.str_BarangayName %>)</h2>
                                    <h2><%= currentPetOwner.str_Email %></h2>
                                    <h2><%= currentPetOwner.str_Phone %></h2>
                                    <i><h5>Stayed in Marikina since <%= currentPetOwner.dat_StartedYearOfStay %></h5></i>

                                    <%
                                    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                                    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                                    var now = new Date(currentPetOwner.dat_DateRegistered);
                                    %>
                                    <i><h5>Registered Pet Owner since <%=  months[now.getMonth()] + ' ' + now.getDate() + ', ' + now.getFullYear() %></h5></i>


                             </div>
                                   <ul class="header-dropdown m-r--5">
                                       <li class="dropdown">
                                           <a href="javascript:void(0);" class="dropdown-toggle"  role="button" aria-haspopup="true" aria-expanded="false">
                                               <i class="material-icons">mode_edit</i>
                                           </a>

                                       </li>
                                   </ul>
                               </div>
                               <div class="body" >
                                   <!-- Nav tabs -->

                                   <ul class="nav nav-tabs" role="tablist">
                                       <li role="presentation" class="active">
                                           <a href="#home_with_icon_title" data-toggle="tab" >
                                               <i class="material-icons">pets</i> PETS
                                           </a>
                                       </li>
                                       <li role="presentation">
                                           <a href="#profile_with_icon_title" data-toggle="tab">
                                               <i class="material-icons">update</i> TRANSACTIONS
                                           </a>
                                       </li>
                                       <li role="presentation">
                                           <a href="#messages_with_icon_title" data-toggle="tab">
                                               <i class="material-icons">account_balance_wallet</i> ACCOUNTS
                                           </a>
                                       </li>
                                   </ul>

                                   <!-- Tab panes -->
                                   <div class="tab-content">
                                       <div role="tabpanel" class="tab-pane fade in active" id="home_with_icon_title">
                                         <div >
                                                        <table class="table table-striped table-hover js-basic-example dataTable">
                                                            <thead>
                                                                <tr>
                                                                    <th>Animal ID</th>
                                                                    <th>Animal Name</th>
                                                                    <th>Breed</th>
                                                                    <th>Sex</th>
                                                                    <th>Color Pattern</th>

                                                                    <th>Action</th>
                                                                </tr>
                                                            </thead>
                                                         <!--   <tfoot>
                                                                <tr>
                                                                    <th>ID</th>
                                                                    <th>Description</th>
                                                                    <th>Price</th>
                                                                </tr>
                                                            </tfoot> -->
                                                            <tbody>
                                                              <% pe.forEach(function(i){ %>
                                                                <tr>
                                                                    <td><%= i.int_PetId %></td>
                                                                    <td><%= i.str_PetName %></td>
                                                                    <td><%= i.str_BreedName %></td>
                                                                    <td><% if(i.int_Sex==0){ %>Male<% }else{ %>Female<%  }%></td>
                                                                    <td><%= i.str_Description %></td>


                                                                    <td>
                                                                        <div align="center">


                                                                           <a data-toggle="modal" data-target="#pethistory" onclick="iteratePet('<%= JSON.stringify(i) %>'); history('<%= i.int_PetId %>');"><button type="button" class="btn btn-primary waves-effect" data-toggle="tooltip" data-placement="top" title="Pet History">
                                                                                    <i class="material-icons">history</i>

                                                                            </button>
                                                                            </a>


                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <% }); %>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                       </div>
                                       <div role="tabpanel" class="tab-pane fade" id="profile_with_icon_title">
                                           <b>Profile Content</b>
                                           <p>
                                               Lorem ipsum dolor sit amet, ut duo atqui exerci dicunt, ius impedit mediocritatem an. Pri ut tation electram moderatius.
                                               Per te suavitate democritum. Duis nemore probatus ne quo, ad liber essent aliquid
                                               pro. Et eos nusquam accumsan, vide mentitum fabellas ne est, eu munere gubergren
                                               sadipscing mel.
                                           </p>
                                       </div>
                                       <div role="tabpanel" class="tab-pane fade" id="messages_with_icon_title">
                                           <b>Message Content</b>
                                           <p>
                                               Lorem ipsum dolor sit amet, ut duo atqui exerci dicunt, ius impedit mediocritatem an. Pri ut tation electram moderatius.
                                               Per te suavitate democritum. Duis nemore probatus ne quo, ad liber essent aliquid
                                               pro. Et eos nusquam accumsan, vide mentitum fabellas ne est, eu munere gubergren
                                               sadipscing mel.
                                           </p>
                                       </div>
                                       <div role="tabpanel" class="tab-pane fade" id="settings_with_icon_title">
                                           <b>Settings Content</b>
                                           <p>
                                               Lorem ipsum dolor sit amet, ut duo atqui exerci dicunt, ius impedit mediocritatem an. Pri ut tation electram moderatius.
                                               Per te suavitate democritum. Duis nemore probatus ne quo, ad liber essent aliquid
                                               pro. Et eos nusquam accumsan, vide mentitum fabellas ne est, eu munere gubergren
                                               sadipscing mel.
                                           </p>
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
                   <script src="PrettifyDate/PrettifyDate.js" type="text/javascript"></script>
                   <script>
                   function iteratePet(petI){
                     $('#modal_petPicture').attr('src', '/Pets'+JSON.parse(petI).str_AnimalPicturePath);
                     $('#modal_petName').text(JSON.parse(petI).str_PetName+'(Pet Tag: '+JSON.parse(petI).str_PetTagNo+")");
                      $('#modal_Birthday').text("Birthday: "+MMMMDDYYYY(JSON.parse(petI).dat_Birthday));
                     $('#modal_DateRegistered').text("Registered Pet since "+MMMMDDYYYY(JSON.parse(petI).dat_DateRegistered));
                   }
                   </script>

                   <div class="modal fade" id="pethistory" tabindex="-1" role="dialog" >
                      <div class="modal-dialog" role="document" style="width:70%;height:400px;outflow:scroll">
                          <div class="modal-content">
                            <div class="modal-header col-sm-12 bg-blue">

                             <div class="col-sm-4" align="center">
                                    <img id="modal_petPicture" style="border:4px;border-style:solid;border-color:white" id="blah" src="#" alt="your image" width="200" height="200" />
                             </div>
                             <div class="col-sm-8">
                                 <h1 id="modal_petName">Gilbert Critica Cortez</h1>
                                 <h3 id="modal_Birthday"></h3>
                                 <i><h4 id="modal_DateRegistered"></h4></i>

                          </div>

                            </div>
                              <div class="modal-body">
                                           <div class="row clearfix">
                          <div >
                              <!-- Nav tabs -->
                              <ul class="nav nav-tabs tab-nav-right" role="tablist" >
                                  <li role="presentation" class="active"><a href="#home_animation_1" data-toggle="tab" aria-expanded="false">VACCINATION</a></li>
                                  <li role="presentation" class=""><a href="#profile_animation_1" data-toggle="tab" aria-expanded="false">MEDICAL</a></li>
                                  <li role="presentation" class=""><a href="#home_animation_2" data-toggle="tab" aria-expanded="false">REDEMPTION</a></li>
                                  <li role="presentation" class=""><a href="#profile_animation_2" data-toggle="tab" aria-expanded="false">IMPOUNDING</a></li>
                                  <li role="presentation" class=""><a href="#profile_animation_3" data-toggle="tab" aria-expanded="false">ADOPTION</a></li>
                                </ul>

                              <!-- Tab panes -->
                              <div class="tab-content">
                                  <div role="tabpanel" class="tab-pane animated zoomInDown active" id="home_animation_1">
                                          <%- include('./vaccinationhistory.ejs') -%>
                                  </div>
                                  <div role="tabpanel" class="tab-pane animated fadeInRight" id="profile_animation_1">
                                    <div>
                                                      <table class="table table-bordered table-striped table-hover js-basic-example dataTable">
                                                          <thead>
                                                              <tr>
                                                                  <th>ID</th>
                                                                   <th>Description</th>
                                                                  <th>Date of Occurence</th>
                                                                  <th>Employee Incharge</th>

                                                              </tr>
                                                          </thead>
                                                          <tbody>

                                                              <tr>
                                                                  <td>1</td>
                                                                  <td>Biogesic</td>
                                                                  <td>01/23/2018</td>


                                                                  <td>Dr. Manuel Carlos</td>
                                                              </tr>

                                                          </tbody>
                                                      </table>
                                                  </div>
                                              </div>

                                  <div role="tabpanel" class="tab-pane animated fadeInRight" id="home_animation_2">
                                               <div>
                                                      <table class="table table-bordered table-striped table-hover js-basic-example dataTable">
                                                          <thead>
                                                              <tr>
                                                                  <th>ID</th>
                                                                   <th>Description</th>
                                                                  <th>Date of Occurence</th>
                                                                   <th>Status</th>
                                                                   <th>Collection Amount</th>
                                                                  <th>Employee Incharge</th>

                                                              </tr>
                                                          </thead>
                                                          <tbody>

                                                              <tr>
                                                                  <td>1</td>
                                                                  <td>Redemption with Penalty 2</td>
                                                                  <td>01/23/2018</td>
                                                          <td>Approved</td>
                                                          <td>250</td>

                                                                  <td>Dr. Manuel Carlos</td>
                                                              </tr>

                                                          </tbody>
                                                      </table>
                                                  </div>
                                              </div>

                                  <div role="tabpanel" class="tab-pane animated fadeInRight" id="profile_animation_2">
                                    <div>
                                                      <table class="table table-bordered table-striped table-hover js-basic-example dataTable">
                                                          <thead>
                                                              <tr>
                                                                  <th>ID</th>
                                                                   <th>Description</th>
                                                                  <th>Date of Occurence</th>


                                                                  <th>Employee Incharge</th>

                                                              </tr>
                                                          </thead>
                                                          <tbody>

                                                              <tr>
                                                                  <td>1</td>
                                                                  <td>Redemption with Penalty 2</td>
                                                                  <td>01/23/2018</td>



                                                                  <td>Dr. Manuel Carlos</td>
                                                              </tr>

                                                          </tbody>
                                                      </table>
                                                  </div>

                                  </div>
                                   <div role="tabpanel" class="tab-pane animated fadeInRight" id="profile_animation_3">
                                    <div>
                                                      <table class="table table-bordered table-striped table-hover js-basic-example dataTable">
                                                          <thead>
                                                              <tr>
                                                                  <th>ID</th>
                                                                   <th>Description</th>
                                                                  <th>Date of Occurence</th>
                                                                   <th>Status</th>
                                                                   <th>Collection Amount</th>
                                                                  <th>Employee Incharge</th>

                                                              </tr>
                                                          </thead>
                                                          <tbody>

                                                              <tr>
                                                                  <td>1</td>
                                                                  <td>Redemption with Penalty 2</td>
                                                                  <td>01/23/2018</td>
                                                          <td>Approved</td>
                                                          <td>250</td>

                                                                  <td>Dr. Manuel Carlos</td>
                                                              </tr>

                                                          </tbody>
                                                      </table>
                                                  </div>
                                              </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                              </div>
                              <div class="modal-footer">

                                  <button type="button" class="btn btn-link waves-effect" data-dismiss="modal">CLOSE</button>
                              </div>
                          </div>
                      </div>
                  </div>

                               <div class="modal fade" id="edit" tabindex="-1" role="dialog">
                                  <div class="modal-dialog" role="document">
                                      <div class="modal-content">
                                          <div class="modal-header bg-blue">
                                              <h4 class="modal-title" id="defaultModalLabel">EDIT REGISTERED PET OWNER PROFILE</h4>
                                          </div>
                                          <div class="modal-body">
                                          <table>
                                          <tr>
                                               <td><img src="../../images/samplePetOwner.JPG" width="200"  alt="User" /></td>
                                                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                                <td><table class="table table-striped">
                                                	<tr>
                  	                              <td><strong>ID NUMBER:</strong></td>
                  	                              <td>#1</td>
                  	                            </tr>
                                                	<tr>
                  	                              <td><strong>NAME:</strong></td>
                  	                              <td><input type="text" class="form-control" name="name" required="" aria-required="true" value='Mary Justine Espin'></td>
                  	                              </tr>
                                                	<tr>
                  	                              <td><strong>HOME ADDRESS:</strong></td>
                  	                             <td>  <input type="textarea" class="form-control" name="name" required="" aria-required="true" value='1605 Sesame Street, Barangay Concepcion, Marikina City'></td>
                  	                             </tr>
                                                	<tr>
                  	                              <td><strong>PHONE NUMBER:</strong></td>
                  	                              <td><input type="text" class="form-control" name="name" required="" aria-required="true" value='0933 256 0780'></td>
                  	                              </tr>
                                                	<tr>
                  	                              <td><strong>EMAIL ADDRESS:</strong></td>
                  	                              <td><input type="text" class="form-control" name="name" required="" aria-required="true" value='mj230709@gmail.com'> </td>
                  	                              </tr>
                                                	<tr>
                  	                              <td><strong>DATE REGISTERED:</strong></td>
                  	                              <td> 01/23/2017</td>
                  	                              </tr>
                                                </table></td>
                                               </tr>
                                               </table>

                                          </div>
                                          <div class="modal-footer">
                                              <button type="button" class="btn btn-link waves-effect" data-dismiss="modal">UPDATE</button>
                                              <button type="button" class="btn btn-link waves-effect" data-dismiss="modal">CLOSE</button>
                                          </div>
                                      </div>
                                  </div>
                              </div>
</section>
<script src="PrettifyDate/PrettifyDate.js"></script>
<script>
  function history(PetId) {

       $.ajax({
                type: 'POST',
                dataType: "json",
                data: { id: PetId},
                url: '/CVO_PetOwnerProfile/getVaccinationHistory',
                success: function(data) {
                
            
                   data.forEach(function(i){
                    var classification="";
                    if(i.int_VaccineClassification==0){ classification="Government" }else{ classification="Private" }
                     $('#vaccinationHistoryTableBody').append(`
                      <tr>
                          <td>`+i.int_VaccinationId+`</td>
                          <td>`+MMMMDDYYYY(i.dtm_DateTimeOfVaccination)+`</td>
                          <td>`+i.str_VaccineName+`</td>
                          <td>`+classification+`</td>
                          <td>`+i.str_Manufacturer+`</td>
                          <td>`+i.str_LotNo+`</td>
                          <td>`+i.str_LastName+`, `+i.str_FirstName+` `+i.str_MiddleName+`</td>
                      </tr>

                      `);

               
                      });

                }
            });
  }

</script>
 <%- include('../../../templates/CVO-Footer-Location.ejs') -%>
